<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Solar Potential Calculator - Estimate your rooftop solar energy potential using real-time NASA solar data and satellite imagery">

    <title>Solar Potential Calculator | Estimate Your Solar Energy Savings</title>

    <!-- Leaflet CSS for Maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Header Section -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">‚òÄÔ∏è</span>
                    <h1>Solar Potential Calculator</h1>
                </div>
                <p class="tagline">Estimate your rooftop solar energy potential using real-time NASA data</p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="grid-layout">

                <!-- Left Panel: Input Form -->
                <section class="card input-section">
                    <h2 class="card-title">
                        Location & Parameters
                    </h2>

                    <form id="solarForm" class="solar-form">
                        <!-- Location Input -->
                        <div class="form-group">
                            <label for="locationSearch">Search Location</label>
                            <div class="search-input-wrapper">
                                <input type="text" id="locationSearch" placeholder="Enter city name or address..."
                                    autocomplete="off">
                                <button type="button" id="searchBtn" class="btn-icon" title="Search location">
                                    Search
                                </button>
                            </div>
                            <small class="hint">Or click on the map to select location</small>
                        </div>

                        <!-- Coordinates Display -->
                        <div class="form-row">
                            <div class="form-group">
                                <label for="latitude">Latitude</label>
                                <input type="number" id="latitude" step="any" placeholder="e.g., 28.6139" required>
                            </div>
                            <div class="form-group">
                                <label for="longitude">Longitude</label>
                                <input type="number" id="longitude" step="any" placeholder="e.g., 77.2090" required>
                            </div>
                        </div>

                        <!-- Roof Area Input -->
                        <div class="form-group">
                            <label for="roofArea">
                                Roof Area (m¬≤)
                                <span class="tooltip" title="Enter the usable roof area in square meters">‚ÑπÔ∏è</span>
                            </label>
                            <input type="number" id="roofArea" min="1" max="10000" placeholder="e.g., 50" required>
                            <!-- 
                                Note: Roof area is manually entered by the user.
                                Satellite imagery is used only for visualization and location validation,
                                NOT for automatic roof detection. This approach maintains accuracy 
                                and keeps the project within academic scope.
                            -->
                        </div>

                        <!-- Panel Type Selection -->
                        <div class="form-group">
                            <label for="panelEfficiency">
                                Panel Type
                                <span class="tooltip" title="Select your solar panel type">‚ÑπÔ∏è</span>
                            </label>
                            <select id="panelEfficiency" required>
                                <option value="16">Standard Polycrystalline (16%)</option>
                                <option value="18" selected>Monocrystalline (18%)</option>
                                <option value="20">High-Efficiency Mono (20%)</option>
                                <option value="22">Premium - SunPower/LG (22%)</option>
                            </select>
                            <div class="range-hint">Higher efficiency = More power from same roof area</div>
                        </div>

                        <!-- Electricity Rate -->
                        <div class="form-group">
                            <label for="electricityRate">
                                Electricity Rate (‚Çπ/kWh)
                                <span class="tooltip" title="Your current electricity cost per unit">‚ÑπÔ∏è</span>
                            </label>
                            <input type="number" id="electricityRate" min="1" max="20" value="8" step="0.5" required>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="btn-primary" id="calculateBtn">
                            <span class="btn-text">Calculate Solar Potential</span>
                            <span class="btn-loader hidden">
                                <span class="spinner"></span>
                                Calculating...
                            </span>
                        </button>
                    </form>
                </section>

                <!-- Right Panel: Map -->
                <section class="card map-section">
                    <h2 class="card-title">
                        Select Location
                    </h2>

                    <!-- Map Controls -->
                    <div class="map-controls">
                        <button type="button" id="toggleSatellite" class="btn-secondary">
                            Satellite View
                        </button>
                    </div>

                    <!-- Map Container -->
                    <div id="map" class="map-container"></div>

                    <p class="map-hint">
                        <strong>Tip:</strong> Click on the map to select your location.
                        Use satellite view to verify your roof location.
                    </p>
                </section>
            </div>

            <!-- Results Section (Initially Hidden) -->
            <section id="resultsSection" class="results-section hidden">
                <h2 class="section-title">
                    Solar Potential Results
                </h2>

                <!-- Results Cards -->
                <div class="results-grid">
                    <!-- Annual Energy Card -->
                    <div class="result-card energy-card">
                        <div class="result-icon">‚ö°</div>
                        <div class="result-content">
                            <h3>Annual Energy Generation</h3>
                            <div class="result-value">
                                <span id="annualEnergy">0</span>
                                <span class="unit">kWh/year</span>
                            </div>
                            <p class="result-desc">Estimated electricity generated by your solar panels</p>
                        </div>
                    </div>

                    <!-- Cost Savings Card -->
                    <div class="result-card savings-card">
                        <div class="result-icon">üí∞</div>
                        <div class="result-content">
                            <h3>Annual Cost Savings</h3>
                            <div class="result-value">
                                <span class="currency">‚Çπ</span>
                                <span id="annualSavings">0</span>
                                <span class="unit">/year</span>
                            </div>
                            <p class="result-desc">Estimated savings on your electricity bill</p>
                        </div>
                    </div>

                    <!-- CO2 Reduction Card -->
                    <div class="result-card co2-card">
                        <div class="result-icon">üå±</div>
                        <div class="result-content">
                            <h3>CO‚ÇÇ Emission Reduction</h3>
                            <div class="result-value">
                                <span id="co2Saved">0</span>
                                <span class="unit">kg/year</span>
                            </div>
                            <p class="result-desc">Your contribution to reducing carbon emissions</p>
                        </div>
                    </div>

                    <!-- Solar Irradiance Card -->
                    <div class="result-card irradiance-card">
                        <div class="result-icon">‚òÄÔ∏è</div>
                        <div class="result-content">
                            <h3>Average Solar Irradiance</h3>
                            <div class="result-value">
                                <span id="avgIrradiance">0</span>
                                <span class="unit">kWh/m¬≤/day</span>
                            </div>
                            <p class="result-desc">Daily solar energy received at your location</p>
                        </div>
                    </div>
                </div>

                <!-- Monthly Chart Section -->
                <div class="card chart-section">
                    <h3 class="card-title">
                        Monthly Energy Generation
                    </h3>
                    <div class="chart-container">
                        <canvas id="monthlyChart"></canvas>
                    </div>
                </div>

                <!-- Data Source Note -->
                <div class="data-note">
                    <p>
                        <strong>Data Source:</strong> Solar irradiance data from
                        <a href="https://power.larc.nasa.gov/" target="_blank" rel="noopener">NASA POWER API</a>
                        (All Sky Surface Shortwave Downward Irradiance)
                    </p>
                    <p class="disclaimer">
                        <em>Note: This is an educational estimate. Actual solar generation may vary based on
                            panel orientation, shading, system losses, and local weather conditions.</em>
                    </p>
                </div>
            </section>

            <!-- Error Message -->
            <div id="errorMessage" class="error-message hidden">
                <span class="error-icon">‚ö†Ô∏è</span>
                <span id="errorText">An error occurred. Please try again.</span>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>
                Solar Potential Calculator | 6th Semester NON-CRT Project
            </p>
            <p class="footer-note">
                Built with NASA POWER API, Leaflet Maps, and Chart.js
            </p>
        </div>
    </footer>

    <!-- Scripts -->
    <!-- Leaflet JS for Maps -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- Chart.js for Data Visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Application Scripts -->
    <script src="charts.js"></script>
    <script src="app.js"></script>
</body>

</html>